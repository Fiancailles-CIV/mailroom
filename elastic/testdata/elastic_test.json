[
    {
        "label": "valid empty color",
        "search": "color!=\"\"",
        "query": ""
    },
    {
        "label": "valid text =",
        "search": "color=red",
        "query": {
            "bool": {
                "must": [
                    {
                        "term": {
                            "fields.field": "ecc7b13b-c698-4f46-8a90-24a8fab6fe34"
                        }
                    },
                    {
                        "term": {
                            "fields.text": "red"
                        }
                    }
                ]
            }
        }
    },
    {
        "label": "valid text !=",
        "search": "color != red",
        "query": {
            "bool": {
                "must_not": {
                    "nested": {
                        "path": "fields",
                        "query": {
                            "bool": {
                                "must": [
                                    {
                                        "term": {
                                            "fields.field": "ecc7b13b-c698-4f46-8a90-24a8fab6fe34"
                                        }
                                    },
                                    {
                                        "term": {
                                            "fields.text": "red"
                                        }
                                    },
                                    {
                                        "exists": {
                                            "field": "fields.text"
                                        }
                                    }
                                ]
                            }
                        }
                    }
                }
            }
        }
    },
    {
        "label": "invalid text >",
        "search": "color > red",
        "error": "unknown text comparator: >"
    },
    {
        "label": "invalid text <",
        "search": "color < red",
        "error": "unknown text comparator: <"
    },
    {
        "label": "valid number =",
        "search": "age=10",
        "query": {
            "bool": {
                "must": [
                    {
                        "term": {
                            "fields.field": "6b6a43fa-a26d-4017-bede-328bcdd5c93b"
                        }
                    },
                    {
                        "match": {
                            "fields.number": {
                                "query": "10"
                            }
                        }
                    }
                ]
            }
        }
    },
    {
        "label": "valid number <=",
        "search": "age<=10",
        "query": {
            "bool": {
                "must": [
                    {
                        "term": {
                            "fields.field": "6b6a43fa-a26d-4017-bede-328bcdd5c93b"
                        }
                    },
                    {
                        "range": {
                            "fields.number": {
                                "from": null,
                                "include_lower": true,
                                "include_upper": true,
                                "to": "10"
                            }
                        }
                    }
                ]
            }
        }
    },
    {
        "label": "valid number >=",
        "search": "age>=10",
        "query": {
            "bool": {
                "must": [
                    {
                        "term": {
                            "fields.field": "6b6a43fa-a26d-4017-bede-328bcdd5c93b"
                        }
                    },
                    {
                        "range": {
                            "fields.number": {
                                "from": "10",
                                "include_lower": true,
                                "include_upper": true,
                                "to": null
                            }
                        }
                    }
                ]
            }
        }
    },
    {
        "label": "valid number <",
        "search": "age<10",
        "query": {
            "bool": {
                "must": [
                    {
                        "term": {
                            "fields.field": "6b6a43fa-a26d-4017-bede-328bcdd5c93b"
                        }
                    },
                    {
                        "range": {
                            "fields_number": {
                                "from": null,
                                "include_lower": true,
                                "include_upper": false,
                                "to": "10"
                            }
                        }
                    }
                ]
            }
        }
    },
    {
        "label": "valid number >",
        "search": "age>10",
        "query": {
            "bool": {
                "must": [
                    {
                        "term": {
                            "fields.field": "6b6a43fa-a26d-4017-bede-328bcdd5c93b"
                        }
                    },
                    {
                        "range": {
                            "fields.number": {
                                "from": "10",
                                "include_lower": false,
                                "include_upper": true,
                                "to": null
                            }
                        }
                    }
                ]
            }
        }
    },
    {
        "label": "invalid number !=",
        "search": "age!=10",
        "error": "unknown number comparator: !="
    },
    {
        "label": "invalid number operand",
        "search": "age=fred",
        "error": "can't convert 'fred' to a number"
    },
    {
        "label": "invalid datetime operand",
        "search": "dob=10",
        "error": "string '10' couldn't be parsed as a date"
    },
    {
        "label": "invalid datetime operator",
        "search": "dob!=2018-06-23",
        "error": "unknown datetime comparator: !="
    },
    {
        "label": "valid date =",
        "search": "dob=2018-06-23",
        "query": {
            "bool": {
                "must": [
                    {
                        "term": {
                            "fields.field": "cbd3fc0e-9b74-4207-a8c7-248082bb4572"
                        }
                    },
                    {
                        "range": {
                            "fields.datetime": {
                                "from": "2018-06-23T00:00:00-04:00",
                                "include_lower": true,
                                "include_upper": false,
                                "to": "2018-06-24T00:00:00-04:00"
                            }
                        }
                    }
                ]
            }
        }
    },
    {
        "label": "valid date >",
        "search": "dob>2018-06-23",
        "query": {
            "bool": {
                "must": [
                    {
                        "term": {
                            "fields.field": "cbd3fc0e-9b74-4207-a8c7-248082bb4572"
                        }
                    },
                    {
                        "range": {
                            "fields.datetime": {
                                "from": "2018-06-24T00:00:00-04:00",
                                "include_lower": true,
                                "include_upper": true,
                                "to": null
                            }
                        }
                    }
                ]
            }
        }
    },
    {
        "label": "valid date >=",
        "search": "dob>=2018-06-23",
        "query": {
            "bool": {
                "must": [
                    {
                        "term": {
                            "fields.field": "cbd3fc0e-9b74-4207-a8c7-248082bb4572"
                        }
                    },
                    {
                        "range": {
                            "fields.datetime": {
                                "from": "2018-06-23T00:00:00-04:00",
                                "include_lower": true,
                                "include_upper": true,
                                "to": null
                            }
                        }
                    }
                ]
            }
        }
    },
    {
        "label": "valid date <",
        "search": "dob<2018-06-23",
        "query": {
            "bool": {
                "must": [
                    {
                        "term": {
                            "fields.field": "cbd3fc0e-9b74-4207-a8c7-248082bb4572"
                        }
                    },
                    {
                        "range": {
                            "fields.datetime": {
                                "from": null,
                                "include_lower": true,
                                "include_upper": false,
                                "to": "2018-06-23T00:00:00-04:00"
                            }
                        }
                    }
                ]
            }
        }
    },
    {
        "label": "valid date <=",
        "search": "dob<=2018-06-23",
        "query": {
            "bool": {
                "must": [
                    {
                        "term": {
                            "fields.field": "cbd3fc0e-9b74-4207-a8c7-248082bb4572"
                        }
                    },
                    {
                        "range": {
                            "fields.datetime": {
                                "from": null,
                                "include_lower": true,
                                "include_upper": false,
                                "to": "2018-06-24T00:00:00-04:00"
                            }
                        }
                    }
                ]
            }
        }
    },
    {
        "label": "valid implicit name",
        "search": "will",
        "query": {
            "match": {
                "name": {
                    "query": "will"
                }
            }
        }
    },
    {
        "label": "valid implicit name",
        "search": "will",
        "is_anon": true,
        "query": {
            "match": {
                "name": {
                    "query": "will"
                }
            }
        }
    },
    {
        "label": "valid implicit id (anon)",
        "search": "7979",
        "is_anon": true,
        "query": {
            "ids": {
                "values": [
                    "7979"
                ]
            }
        }
    },
    {
        "label": "valid implicit tel (normal)",
        "search": "7979",
        "query": {
            "nested": {
                "path": "urns",
                "query": {
                    "match_phrase": {
                        "urns.path": {
                            "query": 7979
                        }
                    }
                }
            }
        }
    },
    {
        "label": "valid state =",
        "search": "state=washington",
        "query": {
            "bool": {
                "must": [
                    {
                        "term": {
                            "fields.field": "67663ad1-3abc-42dd-a162-09df2dea66ec"
                        }
                    },
                    {
                        "term": {
                            "fields.state_keyword": "washington"
                        }
                    }
                ]
            }
        }
    },
    {
        "label": "valid state !=",
        "search": "state!=washington",
        "query": {
            "bool": {
                "must_not": {
                    "nested": {
                        "path": "fields",
                        "query": {
                            "bool": {
                                "must": [
                                    {
                                        "term": {
                                            "fields.state_keyword": "washington"
                                        }
                                    },
                                    {
                                        "exists": {
                                            "field": "fields.state_keyword"
                                        }
                                    }
                                ]
                            }
                        }
                    }
                }
            }
        }
    },
    {
        "label": "invalid state <",
        "search": "state<washington",
        "error": "unknown location comparator: <"
    },
    {
        "label": "valid district =",
        "search": "district=chelan",
        "query": {
            "bool": {
                "must": [
                    {
                        "term": {
                            "fields.field": "54c72635-d747-4e45-883c-099d57dd998e"
                        }
                    },
                    {
                        "term": {
                            "fields.district_keyword": "chelan"
                        }
                    }
                ]
            }
        }
    },
    {
        "label": "valid district !=",
        "search": "district!=chelan",
        "query": {
            "bool": {
                "must_not": {
                    "nested": {
                        "path": "fields",
                        "query": {
                            "bool": {
                                "must": [
                                    {
                                        "term": {
                                            "fields.district_keyword": "chelan"
                                        }
                                    },
                                    {
                                        "exists": {
                                            "field": "fields.district_keyword"
                                        }
                                    }
                                ]
                            }
                        }
                    }
                }
            }
        }
    },
    {
        "label": "invalid district <",
        "search": "district<chelan",
        "error": "unknown location comparator: <"
    },
    {
        "label": "valid ward =",
        "search": "ward=stevens",
        "query": {
            "bool": {
                "must": [
                    {
                        "term": {
                            "fields.field": "fde8f740-c337-421b-8abb-83b954897c80"
                        }
                    },
                    {
                        "term": {
                            "fields.ward_keyword": "stevens"
                        }
                    }
                ]
            }
        }
    },
    {
        "label": "valid ward !=",
        "search": "ward!=stevens",
        "query": {
            "bool": {
                "must_not": {
                    "nested": {
                        "path": "fields",
                        "query": {
                            "bool": {
                                "must": [
                                    {
                                        "term": {
                                            "fields.ward_keyword": "stevens"
                                        }
                                    },
                                    {
                                        "exists": {
                                            "field": "fields.ward_keyword"
                                        }
                                    }
                                ]
                            }
                        }
                    }
                }
            }
        }
    },
    {
        "label": "invalid ward <",
        "search": "ward<stevens",
        "error": "unknown location comparator: <"
    },
    {
        "label": "valid name =",
        "search": "name=chef",
        "query": {
            "term": {
                "name.keyword": "chef"
            }
        }
    },
    {
        "label": "valid name ~",
        "search": "name~chef",
        "query": {
            "match": {
                "name": {
                    "query": "chef"
                }
            }
        }
    },
    {
        "label": "valid name !=",
        "search": "name!=chef",
        "query": {
            "bool": {
                "must_not": {
                    "term": {
                        "name.keyword": "chef"
                    }
                }
            }
        }
    },
    {
        "label": "invalid name >",
        "search": "name>chef",
        "error": "unknown name query comparator: >"
    },
    {
        "label": "valid id =",
        "search": "id=123",
        "query": {
            "ids": {
                "values": [
                    "123"
                ]
            }
        }
    },
    {
        "label": "invalid id !=",
        "search": "id!=123",
        "error": "unknown comparator for id: !="
    },
    {
        "label": "valid language =",
        "search": "language=dog",
        "query": {
            "term": {
                "language": "dog"
            }
        }
    },
    {
        "label": "valid language !=",
        "search": "language!=dog",
        "query": {
            "bool": {
                "must_not": {
                    "term": {
                        "language": "dog"
                    }
                }
            }
        }
    },
    {
        "label": "invalid language >",
        "search": "language>dog",
        "error": "unknown language comparator: >"
    },
    {
        "label": "valid created_on >",
        "search": "created_on>2018-06-23",
        "query": {
            "range": {
                "created_on": {
                    "from": "2018-06-24T00:00:00-04:00",
                    "include_lower": true,
                    "include_upper": true,
                    "to": null
                }
            }
        }
    },
    {
        "label": "valid created_on >=",
        "search": "created_on>=2018-06-23",
        "query": {
            "range": {
                "created_on": {
                    "from": "2018-06-23T00:00:00-04:00",
                    "include_lower": true,
                    "include_upper": true,
                    "to": null
                }
            }
        }
    },
    {
        "label": "valid created_on <",
        "search": "created_on<2018-06-23",
        "query": {
            "range": {
                "created_on": {
                    "from": null,
                    "include_lower": true,
                    "include_upper": false,
                    "to": "2018-06-23T00:00:00-04:00"
                }
            }
        }
    },
    {
        "label": "valid created_on <=",
        "search": "created_on<=2018-06-23",
        "query": {
            "range": {
                "created_on": {
                    "from": null,
                    "include_lower": true,
                    "include_upper": false,
                    "to": "2018-06-24T00:00:00-04:00"
                }
            }
        }
    },
    {
        "label": "valid created_on =",
        "search": "created_on=2018-06-23",
        "query": {
            "range": {
                "created_on": {
                    "from": "2018-06-23T00:00:00-04:00",
                    "include_lower": true,
                    "include_upper": false,
                    "to": "2018-06-24T00:00:00-04:00"
                }
            }
        }
    },
    {
        "label": "invalid created_on !=",
        "search": "created_on!=2018-06-23",
        "error": "unknown created_on comparator: !="
    },
    {
        "label": "invalid created_on operand",
        "search": "created_on<dog",
        "error": "unable to parse datetime: dog: string 'dog' couldn't be parsed as a date"
    },
    {
        "label": "valid tel =",
        "search": "tel=12345",
        "query": {
            "nested": {
                "path": "urns",
                "query": {
                    "bool": {
                        "must": [
                            {
                                "term": {
                                    "urns.path.keyword": "12345"
                                }
                            },
                            {
                                "term": {
                                    "urns.scheme": "tel"
                                }
                            }
                        ]
                    }
                }
            }
        }
    },
    {
        "label": "valid tel !=",
        "search": "tel!=12345",
        "error": "unknown scheme comparator: !="
    },
    {
        "label": "valid tel ~",
        "search": "tel~12345",
        "query": {
            "nested": {
                "path": "urns",
                "query": {
                    "bool": {
                        "must": [
                            {
                                "match_phrase": {
                                    "urns.path": {
                                        "query": "12345"
                                    }
                                }
                            },
                            {
                                "term": {
                                    "urns.scheme": "tel"
                                }
                            }
                        ]
                    }
                }
            }
        }
    },
    {
        "label": "invalid tel >",
        "search": "tel>12345",
        "error": "unknown scheme comparator: >"
    },
    {
        "label": "tel on anon org (should this be error?)",
        "search": "tel=12345",
        "is_anon": true,
        "query": {
            "term": {
                "ids": "-1"
            }
        }
    },
    {
        "label": "unknown field",
        "search": "unknown=12345",
        "error": "unable to find field: unknown"
    },
    {
        "label": "bool and",
        "search": "color=red and age>10",
        "query": {
            "bool": {
                "must": [
                    {
                        "bool": {
                            "must": [
                                {
                                    "term": {
                                        "fields.field": "ecc7b13b-c698-4f46-8a90-24a8fab6fe34"
                                    }
                                },
                                {
                                    "term": {
                                        "fields.text": "red"
                                    }
                                }
                            ]
                        }
                    },
                    {
                        "bool": {
                            "must": [
                                {
                                    "term": {
                                        "fields.field": "6b6a43fa-a26d-4017-bede-328bcdd5c93b"
                                    }
                                },
                                {
                                    "range": {
                                        "fields.number": {
                                            "from": "10",
                                            "include_lower": false,
                                            "include_upper": true,
                                            "to": null
                                        }
                                    }
                                }
                            ]
                        }
                    }
                ]
            }
        }
    },
    {
        "label": "bool or",
        "search": "color=red or age>10",
        "query": {
            "bool": {
                "should": [
                    {
                        "bool": {
                            "must": [
                                {
                                    "term": {
                                        "fields.field": "ecc7b13b-c698-4f46-8a90-24a8fab6fe34"
                                    }
                                },
                                {
                                    "term": {
                                        "fields.text": "red"
                                    }
                                }
                            ]
                        }
                    },
                    {
                        "bool": {
                            "must": [
                                {
                                    "term": {
                                        "fields.field": "6b6a43fa-a26d-4017-bede-328bcdd5c93b"
                                    }
                                },
                                {
                                    "range": {
                                        "fields.number": {
                                            "from": "10",
                                            "include_lower": false,
                                            "include_upper": true,
                                            "to": null
                                        }
                                    }
                                }
                            ]
                        }
                    }
                ]
            }
        }
    }
]